

{deps, [
    {jsx, "3.1.0"}
%%    {cowboy, "2.12.0"}
]}.

%% Elvis 插件用于代码风格检查（可选）
%% 如果需要使用，可以单独安装: https://github.com/inaka/elvis
%% {project_plugins, [
%%     {rebar3_elvis, "1.0.0"}
%% ]}.

{erl_opts, [
    debug_info,
    warnings_as_errors,      %% 将警告视为错误
    warn_export_all,         %% 警告导出所有函数
    warn_unused_vars,        %% 警告未使用的变量
    warn_shadow_vars,        %% 警告变量遮蔽
    warn_unused_import,      %% 警告未使用的导入
    warn_unused_function,    %% 警告未使用的函数
    warn_deprecated_function,%% 警告已弃用的函数
    warn_obsolete_guard,     %% 警告过时的守卫
    warn_unused_record,      %% 警告未使用的记录
    warn_export_vars         %% 警告导出的变量
]}.

%% Dialyzer 配置
{dialyzer, [
    {warnings, [
        error_handling,      %% 检查错误处理
        unmatched_returns,   %% 检查未匹配的返回值
        unknown,             %% 检查未知函数调用
        no_return,           %% 检查永不返回的函数
        no_match,            %% 检查必定失败的模式匹配（这个可以检测你的问题）
        no_unused,           %% 检查未使用的函数
        no_fail_call,        %% 检查必定失败的函数调用
        no_improper_lists,   %% 检查不正确的列表
        no_opaque,           %% 检查不透明类型的误用
        no_missing_calls,    %% 检查缺失的函数调用
        no_contracts,        %% 检查类型规范冲突
        underspecs,          %% 检查类型规范过于宽松
        specdiffs            %% 检查类型规范与实际不符
    ]},
    {get_warnings, true},    %% 显示警告
    {plt_extra_apps, [jsx]}  %% 额外的应用程序
]}.